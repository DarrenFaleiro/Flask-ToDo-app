{% extends "base.html" %} {% block content %}

<div class="task-board">
  <!-- Add Task Form -->
  <div class="add-task-card">
    <form method="POST" class="task-form">
      <input type="text" name="task" placeholder="Add a new task..." required />
      <button type="submit">Add</button>
    </form>
  </div>

  <!-- Task Cards -->
  {% for task in tasks %}
  <div
    class="task-card {% if task.completed %}completed{% else %}pending{% endif %}"
  >
    <div class="task-content">
      <span id="text-{{ task.id }}">{{ task.task }}</span>
      <form
        id="form-{{ task.id }}"
        method="POST"
        action="{{ url_for('update', task_id=task.id) }}"
        style="display: none"
      >
        <input type="text" name="new_task" value="{{ task.task }}" required />
        <button type="submit">Update</button>
        <button type="button" onclick="cancelEdit({{ task.id }})">
          Cancel
        </button>
      </form>
    </div>

    <div class="task-status">
      {% if task.completed %} ‚úÖ Completed {% else %} ‚è≥ Pending {% endif %}
    </div>

    <div class="task-actions">
      <button onclick="editTask({{ task.id }})">Edit</button>
      <a href="/complete/{{ task.id }}">‚úî</a>
      <a href="/delete/{{ task.id }}">üóë</a>
    </div>
  </div>
  {% endfor %}
</div>

<script>
  function editTask(id) {
    document.getElementById("text-" + id).style.display = "none";
    document.getElementById("form-" + id).style.display = "block";
  }

  function cancelEdit(id) {
    document.getElementById("form-" + id).style.display = "none";
    document.getElementById("text-" + id).style.display = "inline";
  }
</script>

{% endblock %}
