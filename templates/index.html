{% extends "base.html" %} {% block content %}

<form method="POST" class="task-form">
  <input type="text" name="task" placeholder="Add a new task..." required />
  <button type="submit">Add</button>
</form>

<table>
  <tr>
    <th>Task</th>
    <th>Status</th>
    <th>Actions</th>
  </tr>

  {% for task in tasks %}
  <tr>
    <td>
      <span id="text-{{ task.id }}">{{ task.task }}</span>

      <form
        id="form-{{ task.id }}"
        method="POST"
        action="{{ url_for('update', task_id=task.id) }}"
        style="display: none"
      >
        <input type="text" name="new_task" value="{{ task.task }}" required />
        <button type="submit">Update</button>
        <button type="button" onclick="cancelEdit({{ task.id }})">
          Cancel
        </button>
      </form>
    </td>

    <td>
      {% if task.completed %} ‚úÖ Completed {% else %} ‚è≥ Pending {% endif %}
    </td>

    <td class="actions">
      <button onclick="editTask({{ task.id }})">Edit</button>
      <a href="/complete/{{ task.id }}">‚úî</a>
      <a href="/delete/{{ task.id }}">üóë</a>
    </td>
  </tr>
  {% endfor %}
</table>

<script>
  function editTask(id) {
    document.getElementById("text-" + id).style.display = "none";
    document.getElementById("form-" + id).style.display = "inline";
  }

  function cancelEdit(id) {
    document.getElementById("form-" + id).style.display = "none";
    document.getElementById("text-" + id).style.display = "inline";
  }
</script>

{% endblock %}
